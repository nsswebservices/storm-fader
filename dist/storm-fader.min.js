!function(t,e){"object"==typeof exports?module.exports=e():t.StormFader=e()}(this,function(){"use strict";function t(t,e){var i=[].slice.call(document.querySelectorAll(t));return 0===i.length&&console.warn("Fader cannot be initialised, no augmentable elements found"),i.forEach(function(t,i){n[i]=Object.assign(Object.create(h),{DOMElement:t,settings:Object.assign({},s,e)}),n[i].init()}),n}function e(e,n){i(),t(e,n)}function i(){n=[]}var n=[],s={nav:!0,auto:!0,speed:5e3,blend:!0,previousBtnTemplate:['<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">','<path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>','<path d="M0 0h24v24H0z" fill="none"/>',"</svg>"].join(""),nextBtnTemplate:['<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">','<path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>','<path d="M0 0h24v24H0z" fill="none"/>',"</svg>"].join("")},h={init:function(){return this.throttledNext=function(t){STORM.UTILS.throttle(this.next.call(this),260)}.bind(this),this.throttledPrevious=function(t){STORM.UTILS.throttle(this.previous.call(this),260)}.bind(this),this.throttledSetHeight=function(t){STORM.UTILS.throttle(this.setHeight.call(this),260)}.bind(this),this.fadeOutTimer=this.settings.blend?300:0,this.timer="",this.timeout="",this.children=[].slice.call(this.DOMElement.querySelectorAll(".fader-item")),this.currentIndex=0,this.children[0].classList.add("current"),this.DOMElement.classList.add("fader-loaded"),this.settings.nav&&this.initUI(),this.settings.auto&&(this.timeout=window.setTimeout(this.next.bind(this),this.settings.speed)),window.setTimeout(this.setHeight.bind(this),120),window.addEventListener("resize",this.throttledSetHeight.bind(this),!1),this},setHeight:function(t){var e=this.children.reduce(function(t,e){return+e.offsetHeight>t?+e.clientHeight:t},0);this.DOMElement.style.height=e+"px"},initUI:function(){var t=document.createDocumentFragment(),e=document.createElement("button"),i=document.createElement("button"),n=document.createElement("ol"),s=document.createElement("li"),h=function(t){return function(){this.change(t)}.bind(this)};return s.classList.add("fader-dot"),e.className="fader-btn fader-btn--next",i.className="fader-btn fader-btn--previous",e.addEventListener("click",this.throttledNext.bind(this),!1),i.addEventListener("click",this.throttledPrevious.bind(this),!1),this.nextButton=t.appendChild(i),this.previousButton=t.appendChild(e),this.previousButton.innerHTML=this.settings.previousBtnTemplate,this.nextButton.innerHTML=this.settings.nextBtnTemplate,this.children.forEach(function(t,e){n.appendChild(s.cloneNode()).addEventListener("click",h.call(this,e),!1)}),n.classList.add("fader-dots"),this.dotMenu=[].slice.call(t.appendChild(n).children),n.firstElementChild.classList.add("current"),this.DOMElement.appendChild(t),this},next:function(){return this.change(this.currentIndex+1<this.children.length?this.currentIndex+1:0),this},previous:function(){return this.change(this.currentIndex-1<0?this.children.length-1:this.currentIndex-1),this},change:function(t){this.settings.auto&&window.clearTimeout(this.timeout);var e=this.currentIndex;return this.children[t].classList.add("active"),this.children[this.currentIndex].classList.remove("active"),this.settings.nav&&(this.dotMenu[this.currentIndex].classList.remove("active"),this.dotMenu[this.currentIndex].classList.add("active")),this.children[this.currentIndex].classList.add("animating"),this.timer=setTimeout(function(){this.children[e].classList.remove("animating"),this.timer=""}.bind(this),this.fadeOutTimer),this.currentIndex=t,this.settings.auto&&(this.timeout=window.setTimeout(this.next.bind(this),this.settings.speed)),this}};return{init:t,reload:e,destroy:i}});